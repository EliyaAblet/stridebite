{% extends "base_dark.html" %}

{% block title %}
  {% if meal %}Edit Meal · StrideBite{% else %}Log Meal · StrideBite{% endif %}
{% endblock %}

{% block header_subtitle %}
  <p class="header-subtitle">
    {% if meal %}Update your meal entry.{% else %}Log what you just ate.{% endif %}
  </p>
{% endblock %}

{% block content %}
<section class="sb-card narrow">
  <div class="card-header">
    <h1 class="card-title">
      {% if meal %}Edit Meal{% else %}Log Meal{% endif %}
    </h1>
    <span class="card-tag">Nutrition</span>
  </div>

  <form method="post" class="sb-form">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <div class="form-grid">
      {% for field in form %}
        <div class="form-field">
          <label for="{{ field.id_for_label }}">{{ field.label }}</label>
          {{ field }}
          {% if field.help_text %}
            <p class="help-text">{{ field.help_text }}</p>
          {% endif %}
          {% for error in field.errors %}
            <p class="error-text">{{ error }}</p>
          {% endfor %}
        </div>
      {% endfor %}
    </div>

    <div class="form-actions">
      <a href="{% url 'meal_list' %}" class="btn-secondary">Cancel</a>
      <button type="submit" class="btn-primary">Save</button>
    </div>
  </form>
</section>
{% endblock %}
